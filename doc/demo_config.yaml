name: default-params

# FASTQ Metadata table
# --------------------

# Required columns:
# - entity: e.g. HSC, Patient1
# - sample: e.g. Tumor, Control, cell 1/2/3
# - read_number: integer
# - path: path to untrimmed fastq files for read 1 and read 2

# if fast_pattern is given: location where the automatically created metadata table should be stored
# (with a timestamp)
# else: metadata table is read from this location
# [required]
metadata_table_tsv:
  /icgc/dkfzlsdf/analysis/hs_ontogeny/metadata/ngs-experiments/scmt-scnmt-bravo-pilot.tsv

# if a fastq_pattern is provided, it must have the fields: entity, sample, read_number and it must additionally have at least one additional field which serves to distinguish read pairs (even if this is not really necessary for the given dataset).
# The fastq_pattern will be used to create a metadata table with one column per field (using smk_wgbs.create_metadata_table_from_file_pattern).
# The metadata table will be placed at metadata_table_tsv (with a timestamp before the suffix)
# [optional]
fastq_pattern:
  /icgc/dkfzlsdf/project/mouse_hematopoiesis_PBAT/sequencing/whole_genome_bisulfite_tagmentation_sequencing/view-by-pid/{entity}/{sample}/paired/run{run}/sequence/AS-{asid}-LR-{lane}_R{read_number}.fastq.gz

protocol: scnmt

protocol_flags:
  scnmt:
    is_nome_seq: True
  sctm:
    is_nome_seq: False

# a list of entity names can be used to restrict the analysis to the specified samples
# if fastq_pattern is used, the auto-constructed metadata table will only contain entries for the requested files.
# [optional]
entities:
  - lsk150_pr-hiera_ex-scnmt-1_cls-1
#  - lsk150_pr-hiera_ex-scnmt-1_cls-0
#  - lsk150_pr-hiera_ex-scnmt-1_cls-1_methneg
#  - lsk150_pr-hiera_ex-scnmt-1_cls-25
#  - lsk150_pr-hiera_ex-sctm-1_cls-0
#  - lsk150_pr-hiera_ex-sctm-1_cls-1
#  - lsk150_pr-hiera_ex-sctm-1_cls-25
#  - bcells_pr-scbs_ex-test-1_cls-100_1
#  - bcells_pr-scbs_ex-test-1_cls-10_1
#  - bcells_pr-scbs_ex-test-1_cls-1_1
#  - bcells_pr-scbs_ex-test-1_cls-1_2
#  - bcells_pr-scbs_ex-test-1_cls-1_3
#  - bcells_pr-scbs_ex-test-1_cls-1_4
#  - bcells_pr-scbs_ex-test-1_cls-1_5
#  - bcells_pr-scbs_ex-test-1_cls-1_6
#  - ctr_pr-scbs_ex-test-1_cls-0_1
#  - hsc_pr-scbs_ex-test-1_cls-10_1
#  - hsc_pr-scbs_ex-test-1_cls-1_1
#  - hsc_pr-scbs_ex-test-1_cls-1_2
#  - hsc_pr-scbs_ex-test-1_cls-1_3
#  - hsc_pr-scbs_ex-test-1_cls-1_4
#  - hsc_pr-scbs_ex-test-1_cls-1_5
#  - hsc_pr-scbs_ex-test-1_cls-1_6
#  - hsc_pr-scbs_ex-test-1_cls-1_7
#  - hsc_pr-scbs_ex-test-1_cls-1_8
#  - monos_pr-scbs_ex-test-1_cls-10_1
#  - monos_pr-scbs_ex-test-1_cls-1_1
#  - monos_pr-scbs_ex-test-1_cls-1_2
#  - monos_pr-scbs_ex-test-1_cls-1_3
#  - monos_pr-scbs_ex-test-1_cls-1_4
#  - monos_pr-scbs_ex-test-1_cls-1_5


# Other input paths
# -----------------

# The path to the folder containing either i) the genome to be bisulfite converted.
# or ii) the bisulfite converted genomes produced by Bismark (the parent folder of Bisulfite_Genome/)
# When the genome is to be created,the Bismark Genome Preparation expects one or more fastA files in the folder (with the file extension: .fa or .fasta (also ending in .gz)).
# [required]
genome_dir:
  /icgc/dkfzlsdf/analysis/B080/kraemers/projects/mbias/sandbox/genomes/GRCm38mm10_PhiX_Lambda_bismark
genome_fa:
  /icgc/dkfzlsdf/analysis/B080/kraemers/projects/mbias/sandbox/genomes/GRCm38mm10_PhiX_Lambda_bismark/GRCm38mm10_PhiX_Lambda.fa


# Output file paths
# -----------------



# If a results per entity directory is specified, relative result_paths are interpreted as relative to this directory
# If not specified, relative result_paths will raise a ValueError
# [required] if result_patterns are relative (the default), otherwise optional
results_dir:
  /icgc/dkfzlsdf/analysis/hs_ontogeny/results

results_prefix:
  '{protocol}/results-per-entity/{entity}/{sample}/smk-wgbs/{config_name}_{workflow_version}'

# [required]
log_dir: logs

# The result_patterns usually do not need to be edited, unless you want to overwrite the default
# file structure created by the workflow. All paths must keep all required fields, of course.
# all bam files have bai indices, even though the paths are not directly specified here
result_patterns:

  # Turn into temporary or piped result?
  # basename must match basename of atomic_bam_unsorted, because bismark output name cannot be changed when using parallel processing
  trimmed_fastq:
    'processed-reads/{entity}_{sample}_lib-{lib}_{uid}_R{read_number}_trimmed.fastq.gz'

  # eg will end up {entity}/{sample}/raw_data/run-{run_id}_asid-{as_id}_LR-{lane_id}_R{read_number}.trimmed.fastq.gz
  # wildcard constraints not necessary: entity and sample may contain _ and - and be greedy, because they are correctly matched by the first two folders of the path
  se_mcalls_cytosines_per_motif:
    'meth-calls/partial-meth-calls/SE_{entity}_{sample}_per-cytosine_{motif}.bed'
  se_bam:
    'alignments/partial-alignments/SE_{entity}_{sample}.bam'
  se_library_bam:
    'alignments/partial-alignments/SE_{entity}_{sample}_lib-{lib}.bam'
  # to allow arbitrary uid tags without a uid keyword (uid_run-abc_lane-001 is not consistent),
  # lib may not contain underscorse
  # uid is composed of all other fields in metadata table
  # --basename to control name in bismark currently not compatible with multicore run
  # so we have to use the fastq stem (bismarks default)
  se_atomic_bam_unsorted:
    'alignments/partial-alignments/SE_{entity}_{sample}_lib-{lib}_{uid}_R{read_number}_trimmed_bismark_bt2.bam'
  se_atomic_bam_sorted:
    'alignments/partial-alignments/SE_{entity}_{sample}_lib-{lib}_{uid}_R{read_number}.bam'


# Else
# ========================================================================================

# For chromosome categoricals and ordering
chromosomes: ["1", "2", "3", "4", "5", "6", "7", "8", "9",
              "10", "11", "12", "13", "14", "15", "16", "17", "18", "19",
              "X", "Y", "MT", "phix", "L"]
